class n{constructor(i=!1){this.time=0,this.isRunning=!1,this.intervalId=null,this.updateCallbacks=[],this.runningCallbacks=[],this.isInverted=i,this.timerSpan=()=>{},this.launch=this.launch.bind(this),this.pause=this.pause.bind(this),this.toggle=this.toggle.bind(this),this.timeAdd=this.timeAdd.bind(this),this.timeSubtract=this.timeSubtract.bind(this),this.toMs=this.toMs.bind(this)}addUpdateListener(i){return this.updateCallbacks.push(i),()=>{this.updateCallbacks=this.updateCallbacks.filter(t=>t!==i)}}addRunningListener(i){return this.runningCallbacks.push(i),()=>{this.runningCallbacks=this.runningCallbacks.filter(t=>t!==i)}}addTimerSnap(i){this.timerSpan=i}notifyUpdate(){this.updateCallbacks.forEach(i=>i(this.time))}notifyRunningChange(){this.runningCallbacks.forEach(i=>i(this.isRunning))}launch(){this.isRunning||!this.isInverted&&this.time<=0||(this.timerSpan(this.time),this.isRunning=!0,this.notifyRunningChange(),this.intervalId=setInterval(()=>{this.isInverted?(this.time=Math.min(this.time+1e3,3599e3),this.notifyUpdate(),this.time>=3599e3&&this.pause()):(this.time=Math.max(0,this.time-1e3),this.notifyUpdate(),this.time===0&&this.pause())},1e3))}pause(){this.isRunning&&(clearInterval(this.intervalId),this.isRunning=!1,this.intervalId=null,this.notifyRunningChange())}toggle(){this.isRunning?this.pause():this.launch()}timeAdd(i){this.time+=i*1e3,this.isInverted||(this.time=Math.min(this.time,3599e3)),this.notifyUpdate()}timeSubtract(i){if(this.isInverted)this.time=Math.max(0,this.time-i*1e3);else{const t=i*1e3;this.time=Math.max(0,this.time-t),this.isRunning&&this.time===0&&this.pause()}this.notifyUpdate()}toMs(){return this.time}destroy(){this.pause(),this.updateCallbacks=[],this.runningCallbacks=[]}}export{n as T};
