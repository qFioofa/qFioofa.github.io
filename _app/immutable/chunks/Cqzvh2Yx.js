import{G as a}from"./CQ1vVtTN.js";class f{static encode(e){if(e===void 0||typeof e=="function")throw new Error("Cannot encode undefined or functions");const t={__class:e.constructor.name,__data:JSON.stringify(e,(i,n)=>typeof n=="bigint"?{__bigint:n.toString()}:n instanceof Map?{__map:Array.from(n.entries())}:n instanceof Set?{__set:Array.from(n)}:n instanceof Date?{__date:n.toISOString()}:n instanceof RegExp?{__regex:n.toString()}:n)},s=JSON.stringify(t);return btoa(unescape(encodeURIComponent(s)))}static decode(e){let t;try{t=decodeURIComponent(escape(atob(e)))}catch{t=e}const s=JSON.parse(t);if(!s.__class||!s.__data)return s;const i=JSON.parse(s.__data,(n,r)=>{if(r&&typeof r=="object"){if("__bigint"in r)return BigInt(r.__bigint);if("__map"in r)return new Map(r.__map);if("__set"in r)return new Set(r.__set);if("__date"in r)return new Date(r.__date);if("__regex"in r){const c=/^\/(.*)\/([dgimsuy]*)$/.exec(r.__regex);return new RegExp(c[1],c[2])}}return r});if(globalThis[s.__class]){const n=Object.create(globalThis[s.__class].prototype);return Object.assign(n,i)}return i}static generateRandomId(e=6){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let i=0;i<e;i++)s+=t.charAt(Math.floor(Math.random()*t.length));return s}}class h{constructor(){this.themes=new Map}registerConfigStyle(e,t){typeof e!="string"||!e.trim()||typeof t!="string"||!t.trim()||this.themes.set(e,t)}async setConfigStyle(e){if(!this.themes.has(e))return;const t=this.themes.get(e);let s;try{const i=t.startsWith("/configs/")?t:`/configs/${t}`;if(s=await fetch(i),!s.ok)return;const n=await s.text();if(!n.trim())return;const r=await f.decode(n.trim());return!r||typeof r!="object"||!r.static||!r.media?void 0:(await a.setConfig(r.static,r.media),!0)}catch(i){return console.error(`Error loading theme "${e}":`,i),!1}}getAvailableThemes(){return Array.from(this.themes.keys())}}class m{constructor(e="green"){this.themes=new Map,this.currentTheme=e}registerTheme(e,t){this.themes.set(e,t||`theme-${e}`)}setTheme(e){if(!this.themes.has(e)||typeof document>"u")return;const t=this.themes.get(e);this.removeAllThemeClasses(),document.documentElement.classList.add(t),this.currentTheme=e}removeAllThemeClasses(){if(!(typeof document>"u"))for(const e of this.themes.values())document.documentElement.classList.remove(e)}getCurrentTheme(){return this.currentTheme}getAvailableThemes(){return Array.from(this.themes.keys())}}const d=new m,g=new h,_=["green","brown","red","blue","cyan","pink","grey","yellow"],u=[{name:"SSL",fileName:"ssl.cfg"}];_.forEach(o=>d.registerTheme(o));u.forEach(o=>g.registerConfigStyle(o.name,o.fileName));export{f as E,g as c,d as t};
